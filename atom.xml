<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[One Night in Mok's Studio]]></title>
  <subtitle><![CDATA[Life is a beautiful struggle.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://moky.cc/"/>
  <updated>2015-07-13T01:39:05.836Z</updated>
  <id>http://moky.cc/</id>
  
  <author>
    <name><![CDATA[Moky]]></name>
    <email><![CDATA[mokyue@163.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[C++中获取系统变量的几种方法]]></title>
    <link href="http://moky.cc/2015/07/13/C-%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
    <id>http://moky.cc/2015/07/13/C-中获取系统变量的几种方法/</id>
    <published>2015-07-13T01:15:11.000Z</published>
    <updated>2015-07-13T01:33:23.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<h2 id="使用Qt里的QProcessEnvironment::systemEnvironment()">使用<code>Qt</code>里的<code>QProcessEnvironment::systemEnvironment()</code></h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">QProcessEnvironment::systemEnvironment().value(<span class="string">"APPDATA"</span>)</div></pre></td></tr></table></figure>

<p><br></p>
<h2 id="使用stdlib里的getenv()">使用<code>stdlib</code>里的<code>getenv()</code></h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"> </div><div class="line"><span class="keyword">int</span> main(<span class="keyword">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">char</span> *pathvar;</div><div class="line">    pathvar = getenv(<span class="string">"PATH"</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"pathvar=%s"</span>,pathvar);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><br></p>
<h2 id="使用winapi里的GetEnvironmentVariable()">使用<code>winapi</code>里的<code>GetEnvironmentVariable()</code></h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">DWORD</span> WINAPI GetEnvironmentVariable(</div><div class="line">  _In_opt_  LPCTSTR lpName,</div><div class="line">  _Out_opt_ LPTSTR  lpBuffer,</div><div class="line">  _In_      <span class="preprocessor">DWORD</span>   nSize</div><div class="line">)<span class="comment">;</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<h2 id="使用Qt里的QProcessEnvironment::systemEnvironment()"]]>
    </summary>
    
      <category term="系统变量" scheme="http://moky.cc/tags/%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F/"/>
    
      <category term="C++" scheme="http://moky.cc/categories/C/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[自定义QScrollBar实例]]></title>
    <link href="http://moky.cc/2015/07/12/%E8%87%AA%E5%AE%9A%E4%B9%89QScrollBar%E5%AE%9E%E4%BE%8B/"/>
    <id>http://moky.cc/2015/07/12/自定义QScrollBar实例/</id>
    <published>2015-07-12T08:22:51.000Z</published>
    <updated>2015-07-12T08:22:51.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python单例模式实例]]></title>
    <link href="http://moky.cc/2015/07/12/Python%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E4%BE%8B/"/>
    <id>http://moky.cc/2015/07/12/Python单例模式实例/</id>
    <published>2015-07-12T07:19:17.000Z</published>
    <updated>2015-07-12T07:56:17.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<h2 id="定义">定义</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># singleton.py</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">singleton</span><span class="params">(cls, *args, **kw)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">        单列模式</div><div class="line">    """</div><div class="line">    instances = {}</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_singleton</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> instances:</div><div class="line">            instances[cls] = cls(*args, **kw)</div><div class="line">        <span class="keyword">return</span> instances[cls]</div><div class="line">    <span class="keyword">return</span> _singleton</div></pre></td></tr></table></figure>

<h2 id="实例">实例</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> singleton  <span class="comment"># 导入上面的定义</span></div><div class="line"><span class="decorator">@singleton</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyController</span><span class="params">()</span>:</span></div><div class="line">    ...</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<h2 id="定义">定义</h2>
<figure class="highlight python"><t]]>
    </summary>
    
      <category term="单例模式" scheme="http://moky.cc/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="singleton" scheme="http://moky.cc/tags/singleton/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python中计算一个整形的位数]]></title>
    <link href="http://moky.cc/2015/07/11/Python%E4%B8%AD%E8%AE%A1%E7%AE%97%E4%B8%80%E4%B8%AA%E6%95%B4%E5%BD%A2%E7%9A%84%E4%BD%8D%E6%95%B0/"/>
    <id>http://moky.cc/2015/07/11/Python中计算一个整形的位数/</id>
    <published>2015-07-11T07:58:02.000Z</published>
    <updated>2015-07-12T08:02:46.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">input = <span class="number">8985315</span></div><div class="line">digits = <span class="number">0</span></div><div class="line">i = <span class="number">1</span></div><div class="line"><span class="keyword">while</span> input / i &gt; <span class="number">0</span>:</div><div class="line">    digits += <span class="number">1</span></div><div class="line">    i *= <span class="number">10</span></div><div class="line"><span class="keyword">print</span> digits</div><div class="line"><span class="comment"># result: 7</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="]]>
    </summary>
    
      <category term="计算位数" scheme="http://moky.cc/tags/%E8%AE%A1%E7%AE%97%E4%BD%8D%E6%95%B0/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Qt里使QTooltips显示禁用Html支持]]></title>
    <link href="http://moky.cc/2015/07/10/Qt%E9%87%8C%E4%BD%BFQTooltips%E6%98%BE%E7%A4%BA%E7%A6%81%E7%94%A8Html%E6%94%AF%E6%8C%81/"/>
    <id>http://moky.cc/2015/07/10/Qt里使QTooltips显示禁用Html支持/</id>
    <published>2015-07-10T03:05:19.000Z</published>
    <updated>2015-07-12T08:21:12.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">info = <span class="string">"&lt;p&gt;text&lt;/p&gt;"</span></div><div class="line">labelInfo.setToolTip(info.replace(<span class="string">"&lt;"</span>, <span class="string">"&amp;lt;"</span>))</div></pre></td></tr></table></figure>

<p><br><br>还有个小窍门，默认的QTooltips如果显示宋体，而你想把它设置为微软雅黑的话，可以用下面的方法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">info = <span class="string">"&lt;p&gt;text&lt;/p&gt;"</span></div><div class="line">labelInfo.setToolTip(<span class="string">"&lt;pre style=\"font-family: \'Microsoft Yahei\';\"&gt;%s&lt;/pre&gt;"</span> % info.replace(<span class="string">"&lt;"</span>, <span class="string">"&amp;lt;"</span>))</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="]]>
    </summary>
    
      <category term="QTooltips" scheme="http://moky.cc/tags/QTooltips/"/>
    
      <category term="禁用Html支持" scheme="http://moky.cc/tags/%E7%A6%81%E7%94%A8Html%E6%94%AF%E6%8C%81/"/>
    
      <category term="PyQt" scheme="http://moky.cc/categories/PyQt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[自定义窗口淡出淡入动画效果]]></title>
    <link href="http://moky.cc/2015/07/09/%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AA%97%E5%8F%A3%E6%B7%A1%E5%87%BA%E6%B7%A1%E5%85%A5%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C/"/>
    <id>http://moky.cc/2015/07/09/自定义窗口淡出淡入动画效果/</id>
    <published>2015-07-09T08:29:21.000Z</published>
    <updated>2015-07-12T08:35:57.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>把下面代码加到你自定义的Widget里面即可:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">class MyWidget(QtGui<span class="built_in">.</span>QWidget):</div><div class="line">    def __init__(<span class="built_in">self</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_visible <span class="subst">=</span> <span class="literal">False</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAniFinished <span class="subst">=</span> <span class="literal">True</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAniFinished <span class="subst">=</span> <span class="literal">True</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni <span class="subst">=</span> <span class="literal">None</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni <span class="subst">=</span> <span class="literal">None</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_initAni()</div><div class="line"> </div><div class="line">    def _initAni(<span class="built_in">self</span>):</div><div class="line">        <span class="string">""</span><span class="string">"</span></div><div class="line">        初始化动画效果</div><div class="line">        :return:</div><div class="line">        "<span class="string">""</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni <span class="subst">=</span> QtCore<span class="built_in">.</span>QPropertyAnimation(<span class="built_in">self</span>, <span class="string">"windowOpacity"</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>setDuration(<span class="number">100</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>setStartValue(<span class="number">0</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>setEndValue(<span class="number">1</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>finished<span class="built_in">.</span>connect(<span class="built_in">self</span><span class="built_in">.</span>_setFadeInAniFinished)</div><div class="line"> </div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni <span class="subst">=</span> QtCore<span class="built_in">.</span>QPropertyAnimation(<span class="built_in">self</span>, <span class="string">"windowOpacity"</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>setDuration(<span class="number">150</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>setStartValue(<span class="number">1</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>setEndValue(<span class="number">0</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>finished<span class="built_in">.</span>connect(<span class="built_in">self</span><span class="built_in">.</span>_setFadeOutAniFinished)</div><div class="line"> </div><div class="line">    def setVisible(<span class="built_in">self</span>, bool_visible):</div><div class="line">        <span class="string">""</span><span class="string">"</span></div><div class="line">        设置是否可见</div><div class="line">        :param bool_visible:</div><div class="line">        :return:</div><div class="line">        "<span class="string">""</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_visible <span class="subst">=</span> bool_visible</div><div class="line">        <span class="keyword">if</span> bool_visible:</div><div class="line">            <span class="keyword">if</span> <span class="literal">not</span> <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAniFinished:</div><div class="line">                <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>stop()</div><div class="line">                <span class="built_in">self</span><span class="built_in">.</span>_setFadeOutAniFinished()</div><div class="line">            <span class="keyword">if</span> <span class="literal">not</span> <span class="built_in">self</span><span class="built_in">.</span>_fadeInAniFinished:</div><div class="line">                <span class="keyword">return</span></div><div class="line">            <span class="built_in">self</span><span class="built_in">.</span>_fadeInAniFinished <span class="subst">=</span> <span class="literal">False</span></div><div class="line">            super(TipsWindow, <span class="built_in">self</span>)<span class="built_in">.</span>setVisible(<span class="literal">True</span>)</div><div class="line">            <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>start()</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">if</span> <span class="literal">not</span> <span class="built_in">self</span><span class="built_in">.</span>_fadeInAniFinished:</div><div class="line">                <span class="built_in">self</span><span class="built_in">.</span>_fadeInAni<span class="built_in">.</span>stop()</div><div class="line">                <span class="built_in">self</span><span class="built_in">.</span>_setFadeInAniFinished()</div><div class="line">            <span class="keyword">if</span> <span class="literal">not</span> <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAniFinished:</div><div class="line">                <span class="keyword">return</span></div><div class="line">            <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAniFinished <span class="subst">=</span> <span class="literal">False</span></div><div class="line">            <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAni<span class="built_in">.</span>start()</div><div class="line"> </div><div class="line">    def isVisible(<span class="built_in">self</span>):</div><div class="line">        <span class="string">""</span><span class="string">"</span></div><div class="line">        是否可见</div><div class="line">        :return:</div><div class="line">        "<span class="string">""</span></div><div class="line">        <span class="keyword">return</span> <span class="built_in">self</span><span class="built_in">.</span>_visible</div><div class="line"> </div><div class="line">    def _setFadeInAniFinished(<span class="built_in">self</span>):</div><div class="line">        <span class="string">""</span><span class="string">"</span></div><div class="line">        淡入动画结束</div><div class="line">        :return:</div><div class="line">        "<span class="string">""</span></div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeInAniFinished <span class="subst">=</span> <span class="literal">True</span></div><div class="line"> </div><div class="line">    def _setFadeOutAniFinished(<span class="built_in">self</span>):</div><div class="line">        <span class="string">""</span><span class="string">"</span></div><div class="line">        淡出动画结束</div><div class="line">        :return:</div><div class="line">        "<span class="string">""</span></div><div class="line">        super(TipsWindow, <span class="built_in">self</span>)<span class="built_in">.</span>setVisible(<span class="literal">False</span>)</div><div class="line">        <span class="built_in">self</span><span class="built_in">.</span>_fadeOutAniFinished <span class="subst">=</span> <span class="literal">True</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>把下面代码加到你自定义的Widget里面即可:</p>
<figure class="highlight]]>
    </summary>
    
      <category term="淡出淡入" scheme="http://moky.cc/tags/%E6%B7%A1%E5%87%BA%E6%B7%A1%E5%85%A5/"/>
    
      <category term="动画" scheme="http://moky.cc/tags/%E5%8A%A8%E7%94%BB/"/>
    
      <category term="PyQt" scheme="http://moky.cc/categories/PyQt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[PyQt中利用winapi禁用系统默认阴影]]></title>
    <link href="http://moky.cc/2015/07/08/PyQt%E4%B8%AD%E5%88%A9%E7%94%A8winapi%E7%A6%81%E7%94%A8%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E9%98%B4%E5%BD%B1/"/>
    <id>http://moky.cc/2015/07/08/PyQt中利用winapi禁用系统默认阴影/</id>
    <published>2015-07-08T08:48:48.000Z</published>
    <updated>2015-07-12T08:49:50.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">enableWindowShadow</span><span class="params">(hWnd, bool_enabled)</span>:</span></div><div class="line">    <span class="keyword">import</span> ctypes</div><div class="line">    GCL_STYLE = (-<span class="number">26</span>)</div><div class="line">    CS_DROPSHADOW = <span class="number">0x00020000</span></div><div class="line">    hWnd = ctypes.c_long(self.winId())</div><div class="line">    class_style = ctypes.windll.user32.GetClassLongA(hWnd, GCL_STYLE)</div><div class="line">    <span class="keyword">if</span> bool_enabled:</div><div class="line">        class_style |= CS_DROPSHADOW</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        class_style &= ~CS_DROPSHADOW</div><div class="line">    ctypes.windll.user32.SetClassLongA(hWnd, GCL_STYLE, class_style)</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"]]>
    </summary>
    
      <category term="winapi" scheme="http://moky.cc/tags/winapi/"/>
    
      <category term="禁用阴影" scheme="http://moky.cc/tags/%E7%A6%81%E7%94%A8%E9%98%B4%E5%BD%B1/"/>
    
      <category term="PyQt" scheme="http://moky.cc/categories/PyQt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python中判断是否为Windows7或更高版本]]></title>
    <link href="http://moky.cc/2015/07/07/Python%E4%B8%AD%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E4%B8%BAWindows7%E6%88%96%E6%9B%B4%E9%AB%98%E7%89%88%E6%9C%AC/"/>
    <id>http://moky.cc/2015/07/07/Python中判断是否为Windows7或更高版本/</id>
    <published>2015-07-07T08:52:20.000Z</published>
    <updated>2015-07-12T08:53:17.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_windows7_orlater</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">import</span> platform</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> platform.system() != <span class="string">"Windows"</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">    version = platform.win32_ver()</div><div class="line">    version_num = version[<span class="number">1</span>]</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        num = int(version_num[<span class="number">0</span>]) * <span class="number">10</span> + int(version_num[<span class="number">2</span>])</div><div class="line">    <span class="keyword">except</span> ValueError:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"> </div><div class="line">    <span class="keyword">if</span> num &gt;= <span class="number">61</span>:</div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"]]>
    </summary>
    
      <category term="系统版本判断" scheme="http://moky.cc/tags/%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E5%88%A4%E6%96%AD/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Qt字符串显示不全显示省略号的实现]]></title>
    <link href="http://moky.cc/2015/05/16/Qt%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%85%A8%E6%98%BE%E7%A4%BA%E7%9C%81%E7%95%A5%E5%8F%B7%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>http://moky.cc/2015/05/16/Qt字符串显示不全显示省略号的实现/</id>
    <published>2015-05-16T08:22:06.000Z</published>
    <updated>2015-05-27T08:17:43.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在使用QLabel显示长文本（如长昵称、简介文本等）的时候，会因为QLabel的固定宽度使一部分文字截断得很不友好，一般的交互处理是在即将截断的文本后面显示省略号，以下为PyQt的实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 根据label截断文本</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_truncatedText</span><span class="params">(self, str_text, label)</span>:</span></div><div class="line">    <span class="keyword">return</span> QtGui.QFontMetrics(label.font()).elidedText(str_text, QtCore.Qt.ElideRight, label.width())</div></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 根据截断文本</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_truncatedText</span><span class="params">(self, str_text, width)</span>:</span></div><div class="line">    <span class="keyword">return</span> QtGui.QFontMetrics(label.font()).elidedText(str_text, QtCore.Qt.ElideRight, width)</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在使用QLabel显示长文本（如长昵称、简介文本等）的时候，会因为QLabel的固定宽度使一部分文字截断]]>
    </summary>
    
      <category term="Qt" scheme="http://moky.cc/tags/Qt/"/>
    
      <category term="截断文字" scheme="http://moky.cc/tags/%E6%88%AA%E6%96%AD%E6%96%87%E5%AD%97/"/>
    
      <category term="PyQt" scheme="http://moky.cc/categories/PyQt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[QTimer和QThread的调度时间精度]]></title>
    <link href="http://moky.cc/2015/05/15/QTimer%E5%92%8CQThread%E7%9A%84%E8%B0%83%E5%BA%A6%E6%97%B6%E9%97%B4%E7%B2%BE%E5%BA%A6/"/>
    <id>http://moky.cc/2015/05/15/QTimer和QThread的调度时间精度/</id>
    <published>2015-05-15T04:07:45.000Z</published>
    <updated>2015-05-16T09:13:54.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/dijunfeng/article/details/7272475" title="http://blog.csdn.net/dijunfeng/article/details/7272475" target="_blank" rel="external">http://blog.csdn.net/dijunfeng/article/details/7272475</a></p>
</blockquote>
<p><br><br>最近做的一个模拟嵌入式设备的项目中，要求事件的响应精度在1毫秒左右，特地编写代码测试了一下QTimer和QThread中的msleep函数的时间精度。</p>
<p>QT的帮助中对于QTimer的时间精度问题是这么写的：</p>
<blockquote>
<p>Timers will never time out earlier than the specified timeout value and they are not guaranteed to time out at the exact value specified. In many situations, they may time out late by a period of time that depends on the accuracy of the system timers.</p>
<p>The accuracy of timers depends on the underlying operating system and hardware. Most platforms support a resolution of 1 millisecond, though the accuracy of the timer will not equal this resolution in many real-world situations.</p>
<p>If Qt is unable to deliver the requested number of timer clicks, it will silently discard some.</p>
</blockquote>
<p><br><br>测试函数用到了windows的高精度时间读取函数，如下所示:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;Windows.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;math.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> TIMER_INTVL  1000  <span class="comment">//毫秒</span></span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> ARRAY_LEN    1  <span class="comment">//数组长度</span></span></div><div class="line"></div><div class="line"><span class="comment">//传入调用时间间隔，打印出最大和平均时间误差</span></div><div class="line"><span class="keyword">void</span> testTimer(<span class="keyword">int</span> intvl_us)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">bool</span> inited = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">static</span> LARGE_INTEGER lastT;</div><div class="line">    <span class="keyword">static</span> LARGE_INTEGER freq;</div><div class="line">    LARGE_INTEGER now;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> usarray[ARRAY_LEN];</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> index = <span class="number">0</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> maxus = <span class="number">0</span>, averus = <span class="number">0</span>, difus;<span class="comment">//时间差</span></div><div class="line">    QString info(<span class="string">"最大时间差："</span>);</div><div class="line">    <span class="keyword">if</span>(!inited)</div><div class="line">    {</div><div class="line">        <span class="built_in">memset</span>(usarray, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)*ARRAY_LEN);</div><div class="line">        QueryPerformanceCounter(&lastT);<span class="comment">//获取第一次进入时的时间</span></div><div class="line">        QueryPerformanceFrequency(&freq);<span class="comment">//获取时钟频率</span></div><div class="line">        inited = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    QueryPerformanceCounter(&now);</div><div class="line">    difus = ((now.QuadPart-lastT.QuadPart)*<span class="number">1000000</span>)/freq.QuadPart;</div><div class="line">    difus = <span class="built_in">abs</span>(difus-intvl_us);</div><div class="line">    usarray[index++] = difus;</div><div class="line">    maxus = maxus&gt;difus?maxus:difus;</div><div class="line">    <span class="keyword">if</span>(index == ARRAY_LEN)</div><div class="line">    {</div><div class="line">        index = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;ARRAY_LEN; i++)</div><div class="line">            averus += usarray[i];</div><div class="line">        averus /= ARRAY_LEN;</div><div class="line">        info = info + QString::number(maxus) + <span class="string">"  平均误差 "</span> + QString::number(averus);</div><div class="line">        gSimDrvDlg-&gt;putInfo(info);</div><div class="line">        maxus = <span class="number">0</span>;</div><div class="line">        averus = <span class="number">0</span>;</div><div class="line">    }</div><div class="line">    lastT = now;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><br><br>把此函数设为QTimer的超时响应函数，在32位windows7下测试QTimer的不同定时周期的调度误差如下：</p>
<p><strong>1ms周期：</strong><br><em>最大：30、40毫秒<br>平均：100微秒左右</em></p>
<p><strong>10ms周期：</strong><br><em>最大：2、3毫秒，跳动比较大，也有20毫秒多过<br>平均：200多微秒</em></p>
<p><strong>100ms周期：</strong><br><em>最大：20多毫秒<br>平均：10毫秒左右</em></p>
<p><strong>1秒周期：</strong><br><em>误差十几毫秒</em></p>
<p>把此函数稍加改动，也可以放到QThread的run()函数中测试一下QThread::msleep的时间精度。<br>在windows下，由于操作系统的本身设计理念问题，定时器的调度误差是比较大的。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/dijunfeng/article/details/7272475" ti]]>
    </summary>
    
      <category term="QTimer" scheme="http://moky.cc/tags/QTimer/"/>
    
      <category term="QThread" scheme="http://moky.cc/tags/QThread/"/>
    
      <category term="时间精度" scheme="http://moky.cc/tags/%E6%97%B6%E9%97%B4%E7%B2%BE%E5%BA%A6/"/>
    
      <category term="计时器精度" scheme="http://moky.cc/tags/%E8%AE%A1%E6%97%B6%E5%99%A8%E7%B2%BE%E5%BA%A6/"/>
    
      <category term="Qt" scheme="http://moky.cc/categories/Qt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Qt中鼠标穿透的实现]]></title>
    <link href="http://moky.cc/2015/05/14/Qt%E4%B8%AD%E9%BC%A0%E6%A0%87%E7%A9%BF%E9%80%8F%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>http://moky.cc/2015/05/14/Qt中鼠标穿透的实现/</id>
    <published>2015-05-14T09:01:20.000Z</published>
    <updated>2015-05-16T09:06:27.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在Qt中，QWidget默认是非鼠标穿透的，如果将QWidget覆盖在其他控件上面，即使这个QWidget是透明的，鼠标也是无法点击下面的控件的。但是我们可以通过设置它的属性来实现鼠标穿透，代码如下:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">QWidget::setAttribute(Qt::WA_TransparentForMouseEvents,<span class="keyword">true</span>);</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在Qt中，QWidget默认是非鼠标穿透的，如果将QWidget覆盖在其他控件上面，即使这个QWidge]]>
    </summary>
    
      <category term="鼠标穿透" scheme="http://moky.cc/tags/%E9%BC%A0%E6%A0%87%E7%A9%BF%E9%80%8F/"/>
    
      <category term="Qt" scheme="http://moky.cc/categories/Qt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Python字符串格式化千分位逗号分隔]]></title>
    <link href="http://moky.cc/2015/05/13/Python%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8D%83%E5%88%86%E4%BD%8D%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94/"/>
    <id>http://moky.cc/2015/05/13/Python字符串格式化千分位逗号分隔/</id>
    <published>2015-05-13T08:51:35.000Z</published>
    <updated>2015-05-16T08:59:39.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在显示大数字的时候，通常会每隔三位用逗号分隔开来显示，这样用户就会更加容易识别出数字的大小，这个可以用字符串处理函数<code>format()</code>来实现。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">"{:,}"</span>.format(<span class="number">99999999</span>)</div><div class="line"></div><div class="line"><span class="comment"># 结果</span></div><div class="line"><span class="comment"># 99,999,999</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>在显示大数字的时候，通常会每隔三位用逗号分隔开来显示，这样用户就会更加容易识别出数字的大小，这个可以用字]]>
    </summary>
    
      <category term="千分位逗号分隔" scheme="http://moky.cc/tags/%E5%8D%83%E5%88%86%E4%BD%8D%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94/"/>
    
      <category term="格式化" scheme="http://moky.cc/tags/%E6%A0%BC%E5%BC%8F%E5%8C%96/"/>
    
      <category term="字符串" scheme="http://moky.cc/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Qt重写paintEvent绘制窗体阴影]]></title>
    <link href="http://moky.cc/2015/05/12/Qt%E9%87%8D%E5%86%99paintEvent%E7%BB%98%E5%88%B6%E7%AA%97%E4%BD%93%E9%98%B4%E5%BD%B1/"/>
    <id>http://moky.cc/2015/05/12/Qt重写paintEvent绘制窗体阴影/</id>
    <published>2015-05-12T13:57:44.000Z</published>
    <updated>2015-05-27T08:18:05.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>Qt窗体做阴影效果的方法有很多种，有直接使用带阴影效果美术资源的，这里就不详说这种方法了，还有一种方法就是重写paintEvent绘制阴影的方法。<br><br><br>代码如下: (以下为PyQt代码的实现，C++ Qt实现的方法原理也是一样的。)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">paintEvent</span><span class="params">(self, event)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    绘制阴影</div><div class="line">    :param event:</div><div class="line">    :return:</div><div class="line">    """</div><div class="line">    path = QtGui.QPainterPath()</div><div class="line">    path.setFillRule(QtCore.Qt.WindingFill)</div><div class="line">    path.addRect(<span class="number">10</span>, <span class="number">10</span>, self.width() - <span class="number">20</span>, self.height() - <span class="number">20</span>)</div><div class="line">    painter = QtGui.QPainter(self)</div><div class="line">    painter.setRenderHint(QtGui.QPainter.Antialiasing, <span class="keyword">True</span>)</div><div class="line">    painter.fillPath(path, QtGui.QBrush(QtCore.Qt.white))</div><div class="line">    color = QtGui.QColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">50</span>)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>):</div><div class="line">        path = QtGui.QPainterPath()</div><div class="line">        path.setFillRule(QtCore.Qt.WindingFill)</div><div class="line">        path.addRect(<span class="number">10</span> - i, <span class="number">10</span> - i, self.width() - (<span class="number">10</span> - i) * <span class="number">2</span>, self.height() - (<span class="number">10</span> - i) * <span class="number">2</span>)</div><div class="line">        color.setAlpha(<span class="number">150</span> - math.sqrt(i) * <span class="number">50</span>)</div><div class="line">        painter.setPen(color)</div><div class="line">        painter.drawPath(path)</div></pre></td></tr></table></figure>

<p>做出来的阴影效果类似于下图:<br><img src="http://i.imgur.com/afURmb0.png" alt="效果图"></p>
<p><br><br>之前写的一篇自定义Tooltips的文章用的就是这种方法，大家可以参考一下。</p>
<blockquote>
<p><a href="http://moky.cc/2015/03/17/%E7%BB%98%E5%88%B6%E6%94%AF%E6%8C%81%E5%AF%8C%E6%96%87%E6%9C%AC%E5%B8%A6%E9%98%B4%E5%BD%B1%E8%87%AA%E9%80%82%E5%BA%94%E5%A4%A7%E5%B0%8F%E7%9A%84Tooltips/" target="_blank" rel="external">绘制支持富文本带阴影自适应大小的Tooltips</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>Qt窗体做阴影效果的方法有很多种，有直接使用带阴影效果美术资源的，这里就不详说这种方法了，还有一种方法就]]>
    </summary>
    
      <category term="Qt" scheme="http://moky.cc/tags/Qt/"/>
    
      <category term="paintEvent" scheme="http://moky.cc/tags/paintEvent/"/>
    
      <category term="绘制阴影" scheme="http://moky.cc/tags/%E7%BB%98%E5%88%B6%E9%98%B4%E5%BD%B1/"/>
    
      <category term="PyQt" scheme="http://moky.cc/categories/PyQt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[自定义QScrollBar样式]]></title>
    <link href="http://moky.cc/2015/05/11/%E8%87%AA%E5%AE%9A%E4%B9%89QScrollBar%E6%A0%B7%E5%BC%8F/"/>
    <id>http://moky.cc/2015/05/11/自定义QScrollBar样式/</id>
    <published>2015-05-11T04:36:25.000Z</published>
    <updated>2015-07-12T08:27:16.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>QScrollBar是Qt日常开发里使用得比较频繁的一个控件，默认的系统样式已经无法满足开发需求，所以我们就需要定义QSS样式自定义QScrollBar的样式了。QScrollBar主要由handle、add-line、sub-line、add-page、sub-page、up-arrow和down-arrow几部分组成，以下为常用的QScrollBar样式设置。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="tag">QScrollBar</span></div><div class="line"><span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">8px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#6c7bad</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">4px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span><span class="pseudo">:hover</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#6a7fc5</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span><span class="pseudo">:pressed</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#5b75cb</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::add-line</span>, <span class="tag">QScrollBar</span><span class="pseudo">::sub-line</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">0px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::add-page</span>, <span class="tag">QScrollBar</span><span class="pseudo">::sub-page</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::up-arrow</span>, <span class="tag">QScrollBar</span><span class="pseudo">::down-arrow</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> transparent</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">0px</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>运行结果：<br><img src="QScrollBar-qss.png" alt="QScrollBar-qss.png"></p>
<p><br><br>还有一种是半透明效果的:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">:vertical</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">10px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span><span class="pseudo">:vertical</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">180</span>)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">min-height</span>:<span class="value"> <span class="number">70px</span></span></span>;</div><div class="line">	<span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">5px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span><span class="pseudo">:vertical</span><span class="pseudo">:hover</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>)</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::handle</span><span class="pseudo">:vertical</span><span class="pseudo">:pressed</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">200</span>)</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::add-line</span><span class="pseudo">:vertical</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> none</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::sub-line</span><span class="pseudo">:vertical</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> none</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::add-page</span><span class="pseudo">:vertical</span>,</div><div class="line"><span class="tag">QScrollBar</span><span class="pseudo">::sub-page</span><span class="pseudo">:vertical</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> none</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>运行结果：<br><img src="QScrollBar-qss2.png" alt="QScrollBar-qss2.png"></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>QScrollBar是Qt日常开发里使用得比较频繁的一个控件，默认的系统样式已经无法满足开发需求，所以我]]>
    </summary>
    
      <category term="PyQt" scheme="http://moky.cc/tags/PyQt/"/>
    
      <category term="QSS" scheme="http://moky.cc/tags/QSS/"/>
    
      <category term="QScrollBar" scheme="http://moky.cc/tags/QScrollBar/"/>
    
      <category term="Qt" scheme="http://moky.cc/categories/Qt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[自定义QTabWidget样式]]></title>
    <link href="http://moky.cc/2015/05/10/%E8%87%AA%E5%AE%9A%E4%B9%89QTabWidget%E6%A0%B7%E5%BC%8F/"/>
    <id>http://moky.cc/2015/05/10/自定义QTabWidget样式/</id>
    <published>2015-05-10T05:27:38.000Z</published>
    <updated>2015-07-12T08:40:12.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>记录一下如果用<code>QSS</code>实现如下效果的<code>QTabWidget</code>控件:<br><img src="result.png" alt="效果图"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">QTabWidget</span><span class="id">#tabWidget</span><span class="pseudo">:pane</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">border-width</span>:<span class="value"> <span class="number">0</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#ffffff</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">border-image</span>:<span class="value"> <span class="function">url</span>(:/tab-normal.png)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">90px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">35px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#999999</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">font</span>:<span class="value"> <span class="number">12px</span> <span class="string">"Microsoft Yahei"</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span><span class="pseudo">:selected</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">border-image</span>:<span class="value"> <span class="function">url</span>(:/tab-selected.png)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#333333</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span><span class="pseudo">:hover</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#333333</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>图片资源: <code>PS: 图片资源右边有一条浅灰色的竖线以区分每个Tab，可以调整QTabWidget宽度使最后一个Tab不显示这条竖线 :)</code><br><img src="tab-normal.png" alt="tab-normal.png"></p>
<p><img src="tab-selected.png" alt="tab-selected.png"></p>
<p><br><br>还有另外一种半透明效果的:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">QTabWidget</span><span class="pseudo">:pane</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">border</span>:<span class="value"> none</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">120</span>)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#a59400</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">128px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">19px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">border-top-left-radius</span>:<span class="value"> <span class="number">3px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">border-top-right-radius</span>:<span class="value"> <span class="number">3px</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">margin-right</span>:<span class="value"> <span class="number">2px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span><span class="pseudo">:selected</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">166</span>)</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#fae119</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"></div><div class="line"><span class="tag">QTabBar</span><span class="pseudo">:tab</span><span class="pseudo">:hover</span>:!<span class="tag">selected</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="function">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">156</span>)</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p><img src="result2.png" alt="效果图"></p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。</p>
</blockquote>
<p>记录一下如果用<code>QSS</code>实现如下效果的<code>QTabWidget</code]]>
    </summary>
    
      <category term="PyQt" scheme="http://moky.cc/tags/PyQt/"/>
    
      <category term="QSS" scheme="http://moky.cc/tags/QSS/"/>
    
      <category term="QTabWidget" scheme="http://moky.cc/tags/QTabWidget/"/>
    
      <category term="Qt" scheme="http://moky.cc/categories/Qt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Notepad++命令行参数]]></title>
    <link href="http://moky.cc/2015/05/09/Notepad-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"/>
    <id>http://moky.cc/2015/05/09/Notepad-命令行参数/</id>
    <published>2015-05-09T08:48:50.000Z</published>
    <updated>2015-05-11T01:14:08.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://www.cnblogs.com/lihaozy/archive/2012/08/03/2621034.html" title="http://www.cnblogs.com/lihaozy/archive/2012/08/03/2621034.html" target="_blank" rel="external">http://www.cnblogs.com/lihaozy/archive/2012/08/03/2621034.html</a></p>
</blockquote>
<p><code>Notepad++.exe [-multiInst] [-noPlugin] [-ro] [-nosession] [-notabbar] [-n##] [-l$$$] [FILES]</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Notepad++ 支持命令行参数。以下就是 Notepad++ 支持的命令行选项（区分大小写）： p&gt;</div><div class="line"></div><div class="line">-<span class="ruby">n行号</span></div><div class="line">    文件打开后光标所在的行号.</div><div class="line">-<span class="ruby">c</span></div><div class="line">    启动列编辑模式.</div><div class="line">-<span class="ruby">-help</span></div><div class="line">    显示命令行帮助，比如命令行的格式</div><div class="line">-<span class="ruby">loadingTime</span></div><div class="line">    显示 Notepad++ 打开所有文件所消耗的时间.结果以对话框形式显示，时间精确到0.01秒。</div><div class="line">-<span class="ruby">multiInst</span></div><div class="line">    允许多个 Notepad++ 同时运行。默认情况下，如果 Notepad++ 已经运行的话，文件将会由此 Notepad++ 实例打开，如果开启了多实例模式，文件由新的 Notepad++ 实例打开.</div><div class="line">-<span class="ruby">noPlugin</span></div><div class="line">    不加载任何插件。如果你担心插件可能不安全，或者不想加载任何插件的话，可以使用此选项.</div><div class="line">-<span class="ruby">ro</span></div><div class="line">    所有的文件都以只读模式打开.</div><div class="line">-<span class="ruby">nosession</span></div><div class="line">    在 Notepad++ 启动后不加载之前保持的会话.在 Notepad++ 退出时也不保持当前会话。</div><div class="line">-<span class="ruby">notabbar</span></div><div class="line">    隐藏工具栏</div><div class="line">-<span class="ruby">systemtray</span></div><div class="line">    Notepad++ 启动后最小化到托盘，也称作 通知区域。</div><div class="line">-<span class="ruby">x行号</span></div><div class="line">    指定Notepad++启动后光标所在的行号</div><div class="line">-<span class="ruby">y列号</span></div><div class="line">    指定 Notepad++ 启动后光标所在的列号.</div><div class="line">-<span class="ruby">l语言缩写名</span></div><div class="line">    指定文件的语言格式. $$$ 表示以下任意一种语言的缩写字符串:</div><div class="line">    normal, php, c, cpp, cs, objc, d, java, rc, html, xml, makefile, pascal, batch, ini, nfo, asp, sql, vb, javascript, css, perl, python, lua, tex, cobol, fortran, bash, actionscript, nsis, tcl, lisp, scheme, asm, diff, props, postscript, ruby, smalltalk, vhdl, kix, autoit, Gui4Cli, powershell, caml, ada, verilog, matlab, haskell, inno, cmake, yaml,r, jsp</div><div class="line">    命令行的其他参数都将被当作文件名。总是把你的文件名用引号括起来，以防你的文件中包含空格时，Notepad++ 将其分割为多个文件名.</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://www.cnblogs.com/lihaozy/archive/2012/08/03/2621034.]]>
    </summary>
    
      <category term="Notepad++" scheme="http://moky.cc/tags/Notepad/"/>
    
      <category term="命令行参数" scheme="http://moky.cc/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"/>
    
      <category term="杂类" scheme="http://moky.cc/categories/%E6%9D%82%E7%B1%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[PyChecker使用指南]]></title>
    <link href="http://moky.cc/2015/05/08/PyChecker%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <id>http://moky.cc/2015/05/08/PyChecker使用指南/</id>
    <published>2015-05-08T10:51:45.000Z</published>
    <updated>2015-05-11T01:14:08.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/thoughtwise/article/details/5719455" title="http://blog.csdn.net/thoughtwise/article/details/5719455" target="_blank" rel="external">http://blog.csdn.net/thoughtwise/article/details/5719455</a></p>
</blockquote>
<h2 id="简介">简介</h2>
<p>PyChecker是一个对Python源代码进行语法检查的工具。<br>主页：<a href="http://pychecker.sourceforge.net" title="http://pychecker.sourceforge.net" target="_blank" rel="external">http://pychecker.sourceforge.net</a></p>
<p>PyChecker is a static analysis tool for finding bugs in Python source code. It finds problems that are typically caught by a compiler for less dynamic languages, like C and C++. It is similar to lint.</p>
<p>目前最新版本是2008-08-18 更新的pychecker-0.8.18。</p>
<p><br></p>
<h2 id="安装">安装</h2>
<p>前提：本地安装好Python2.x， 推荐2.6版本，虽然2.7版本也发布了。3.0版差异太大，相当于全新版本，不保证兼容性，不推荐使用。<br>最好将IPython也一并安装了。</p>
<p>下载地址：<a href="http://sourceforge.net/projects/pychecker" title="http://sourceforge.net/projects/pychecker" target="_blank" rel="external">http://sourceforge.net/projects/pychecker</a></p>
<p>从网页上下载pychecker-0.8.18.tar.gz，解压。</p>
<p>然后在pychecker-0.8.18目录(其下有setup.py脚本)， 执行命令行<code>python setup.py install</code>执行安装。这也是在Windows下python软件的通用安装方式。</p>
<p><br></p>
<h2 id="使用">使用</h2>
<p>安装好后，试试在pychecker-0.8.18目录执行命令行<code>pychecker setup.py</code>，检查setup.py的语法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="constant">E</span><span class="symbol">:/pychecker-</span><span class="number">0</span>.<span class="number">8.18</span>&gt;pychecker setup.py</div><div class="line"></div><div class="line"><span class="constant">E</span><span class="symbol">:/pychecker-</span><span class="number">0</span>.<span class="number">8.18</span>&gt;<span class="constant">C</span><span class="symbol">:/Python26/python</span>.exe <span class="constant">C</span><span class="symbol">:/Python26/Lib/site-packages/pychecker/checker</span>.py se</div><div class="line">tup.py</div><div class="line"><span class="constant">Processing</span> <span class="class"><span class="keyword">module</span> <span class="title">setup</span> (<span class="title">setup</span>.<span class="title">py</span>)...</span></div><div class="line"></div><div class="line"><span class="constant">Warnings</span>...</div><div class="line"></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/bdist_wininst</span>.<span class="symbol">py:</span><span class="number">271</span><span class="symbol">:</span> <span class="constant">Statement</span> appears to have no effect</div><div class="line"></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/build_scripts</span>.<span class="symbol">py:</span><span class="number">80</span><span class="symbol">:</span> <span class="constant">No</span> <span class="class"><span class="keyword">class</span> <span class="title">attribute</span> (<span class="title">dry_run</span>) <span class="title">found</span></span></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/build_scripts</span>.<span class="symbol">py:</span><span class="number">97</span><span class="symbol">:</span> <span class="constant">No</span> <span class="class"><span class="keyword">class</span> <span class="title">attribute</span> (<span class="title">dry_run</span>) <span class="title">found</span></span></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/build_scripts</span>.<span class="symbol">py:</span><span class="number">120</span><span class="symbol">:</span> (file) shadows builtin</div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/build_scripts</span>.<span class="symbol">py:</span><span class="number">121</span><span class="symbol">:</span> <span class="constant">No</span> <span class="class"><span class="keyword">class</span> <span class="title">attribute</span> (<span class="title">dry_run</span>) <span class="title">found</span></span></div><div class="line"></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/install_data</span>.<span class="symbol">py:</span><span class="number">62</span><span class="symbol">:</span> (dir) shadows builtin</div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/install_data</span>.<span class="symbol">py:</span><span class="number">64</span><span class="symbol">:</span> (dir) shadows builtin</div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/install_data</span>.<span class="symbol">py:</span><span class="number">66</span><span class="symbol">:</span> (dir) shadows builtin</div><div class="line"></div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/install_scripts</span>.<span class="symbol">py:</span><span class="number">52</span><span class="symbol">:</span> (file) shadows builtin</div><div class="line"><span class="constant">C</span><span class="symbol">:/Python26/lib/distutils/command/install_scripts</span>.<span class="symbol">py:</span><span class="number">53</span><span class="symbol">:</span> <span class="constant">No</span> <span class="class"><span class="keyword">class</span> <span class="title">attribute</span> (<span class="title">dry_run</span>) <span class="title">found</span></span></div><div class="line"></div><div class="line"><span class="number">19</span> errors suppressed, use -<span class="comment">#/--limit to increase the number of errors displayed</span></div></pre></td></tr></table></figure>


<p>这里pychecker 是个bat脚本，实际执行的是C:/Python26/python.exe C:/Python26/Lib/site-packages/pychecker/checker.py 。</p>
<p>这里检查结果将setup.py依赖的文件中语法错误或告警也检查出来了。</p>
<p>如果只想检查setup.py自身的语法，可以用<code>--only</code>参数</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="constant">E</span><span class="symbol">:/pychecker-</span><span class="number">0</span>.<span class="number">8.18</span>&gt;pychecker --only setup.py</div><div class="line"></div><div class="line"><span class="constant">E</span><span class="symbol">:/pychecker-</span><span class="number">0</span>.<span class="number">8.18</span>&gt;<span class="constant">C</span><span class="symbol">:/Python26/python</span>.exe <span class="constant">C</span><span class="symbol">:/Python26/Lib/site-packages/pychecker/checker</span>.py --only setup.py</div><div class="line"><span class="constant">Processing</span> <span class="class"><span class="keyword">module</span> <span class="title">setup</span> (<span class="title">setup</span>.<span class="title">py</span>)...</span></div><div class="line"></div><div class="line"><span class="constant">Warnings</span>...</div><div class="line"></div><div class="line"><span class="constant">None</span></div></pre></td></tr></table></figure>

<p>更多的参数，可以使用<code>pychecker --help</code>查看</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/thoughtwise/article/details/5719455" ]]>
    </summary>
    
      <category term="PyChecker" scheme="http://moky.cc/tags/PyChecker/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[QT内置的ICON资源]]></title>
    <link href="http://moky.cc/2015/05/07/QT%E5%86%85%E7%BD%AE%E7%9A%84ICON%E8%B5%84%E6%BA%90/"/>
    <id>http://moky.cc/2015/05/07/QT内置的ICON资源/</id>
    <published>2015-05-07T08:57:53.000Z</published>
    <updated>2015-05-12T13:33:19.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/fjb2080/article/details/7225692" title="http://blog.csdn.net/fjb2080/article/details/7225692" target="_blank" rel="external">http://blog.csdn.net/fjb2080/article/details/7225692</a></p>
</blockquote>
<p>QT内置的ICON资源保存在QStyle类里。</p>
<p>可以通过成员函数<br><code>QStyle::standardIcon</code><br>来获取。</p>
<p>保存的icon有：<br><code>enum QStyle::StandardPixmap</code> This enum describes the available standard pixmaps. A standard pixmap is a pixmap that can follow some existing GUI style or guideline.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Constant</th>
<th style="text-align:right">Value</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarMinButton</td>
<td style="text-align:right">1</td>
<td style="text-align:center">Minimize button on title bars (e.g., in QMdiSubWindow).</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarMenuButton</td>
<td style="text-align:right">0</td>
<td style="text-align:center">Menu button on a title bar.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarMaxButton</td>
<td style="text-align:right">2</td>
<td style="text-align:center">Maximize button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarCloseButton</td>
<td style="text-align:right">3</td>
<td style="text-align:center">Close button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarNormalButton</td>
<td style="text-align:right">4</td>
<td style="text-align:center">Normal (restore) button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarShadeButton</td>
<td style="text-align:right">5</td>
<td style="text-align:center">Shade button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarUnshadeButton</td>
<td style="text-align:right">6</td>
<td style="text-align:center">Unshade button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TitleBarContextHelpButton</td>
<td style="text-align:right">7</td>
<td style="text-align:center">The Context help button on title bars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MessageBoxInformation</td>
<td style="text-align:right">9</td>
<td style="text-align:center">The “information” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MessageBoxWarning</td>
<td style="text-align:right">10</td>
<td style="text-align:center">The “warning” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MessageBoxCritical</td>
<td style="text-align:right">11</td>
<td style="text-align:center">The “critical” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MessageBoxQuestion</td>
<td style="text-align:right">12</td>
<td style="text-align:center">The “question” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DesktopIcon</td>
<td style="text-align:right">13</td>
<td style="text-align:center">The “desktop” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_TrashIcon</td>
<td style="text-align:right">14</td>
<td style="text-align:center">The “trash” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ComputerIcon</td>
<td style="text-align:right">15</td>
<td style="text-align:center">The “My computer” icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DriveFDIcon</td>
<td style="text-align:right">16</td>
<td style="text-align:center">The floppy icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DriveHDIcon</td>
<td style="text-align:right">17</td>
<td style="text-align:center">The harddrive icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DriveCDIcon</td>
<td style="text-align:right">18</td>
<td style="text-align:center">The CD icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DriveDVDIcon</td>
<td style="text-align:right">19</td>
<td style="text-align:center">The DVD icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DriveNetIcon</td>
<td style="text-align:right">20</td>
<td style="text-align:center">The network icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DirHomeIcon</td>
<td style="text-align:right">55</td>
<td style="text-align:center">The home directory icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DirOpenIcon</td>
<td style="text-align:right">21</td>
<td style="text-align:center">The open directory icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DirClosedIcon</td>
<td style="text-align:right">22</td>
<td style="text-align:center">The closed directory icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DirIcon</td>
<td style="text-align:right">37</td>
<td style="text-align:center">The directory icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DirLinkIcon</td>
<td style="text-align:right">23</td>
<td style="text-align:center">The link to directory icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileIcon</td>
<td style="text-align:right">24</td>
<td style="text-align:center">The file icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileLinkIcon</td>
<td style="text-align:right">25</td>
<td style="text-align:center">The link to file icon.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogStart</td>
<td style="text-align:right">28</td>
<td style="text-align:center">The “start” icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogEnd</td>
<td style="text-align:right">29</td>
<td style="text-align:center">The “end” icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogToParent</td>
<td style="text-align:right">30</td>
<td style="text-align:center">The “parent directory” icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogNewFolder</td>
<td style="text-align:right">31</td>
<td style="text-align:center">The “create new folder” icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogDetailedView</td>
<td style="text-align:right">32</td>
<td style="text-align:center">The detailed view icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogInfoView</td>
<td style="text-align:right">33</td>
<td style="text-align:center">The file info icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogContentsView</td>
<td style="text-align:right">34</td>
<td style="text-align:center">The contents view icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogListView</td>
<td style="text-align:right">35</td>
<td style="text-align:center">The list view icon in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_FileDialogBack</td>
<td style="text-align:right">36</td>
<td style="text-align:center">The back arrow in a file dialog.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DockWidgetCloseButton</td>
<td style="text-align:right">8</td>
<td style="text-align:center">Close button on dock windows (see also QDockWidget).</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ToolBarHorizontalExtensionButton</td>
<td style="text-align:right">26</td>
<td style="text-align:center">Extension button for horizontal toolbars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ToolBarVerticalExtensionButton</td>
<td style="text-align:right">27</td>
<td style="text-align:center">Extension button for vertical toolbars.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogOkButton</td>
<td style="text-align:right">38</td>
<td style="text-align:center">Icon for a standard OK button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogCancelButton</td>
<td style="text-align:right">39</td>
<td style="text-align:center">Icon for a standard Cancel button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogHelpButton</td>
<td style="text-align:right">40</td>
<td style="text-align:center">Icon for a standard Help button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogOpenButton</td>
<td style="text-align:right">41</td>
<td style="text-align:center">Icon for a standard Open button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogSaveButton</td>
<td style="text-align:right">42</td>
<td style="text-align:center">Icon for a standard Save button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogCloseButton</td>
<td style="text-align:right">43</td>
<td style="text-align:center">Icon for a standard Close button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogApplyButton</td>
<td style="text-align:right">44</td>
<td style="text-align:center">Icon for a standard Apply button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogResetButton</td>
<td style="text-align:right">45</td>
<td style="text-align:center">Icon for a standard Reset button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogDiscardButton</td>
<td style="text-align:right">46</td>
<td style="text-align:center">Icon for a standard Discard button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogYesButton</td>
<td style="text-align:right">47</td>
<td style="text-align:center">Icon for a standard Yes button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_DialogNoButton</td>
<td style="text-align:right">48</td>
<td style="text-align:center">Icon for a standard No button in a QDialogButtonBox.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowUp</td>
<td style="text-align:right">49</td>
<td style="text-align:center">Icon arrow pointing up.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowDown</td>
<td style="text-align:right">50</td>
<td style="text-align:center">Icon arrow pointing down.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowLeft</td>
<td style="text-align:right">51</td>
<td style="text-align:center">Icon arrow pointing left.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowRight</td>
<td style="text-align:right">52</td>
<td style="text-align:center">Icon arrow pointing right.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowBack</td>
<td style="text-align:right">53</td>
<td style="text-align:center">Equivalent to SP_ArrowLeft when the current layout direction isQt::LeftToRight, otherwise SP_ArrowRight.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_ArrowForward</td>
<td style="text-align:right">54</td>
<td style="text-align:center">Equivalent to SP_ArrowRight when the current layout direction isQt::LeftToRight, otherwise SP_ArrowLeft.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_CommandLink</td>
<td style="text-align:right">56</td>
<td style="text-align:center">Icon used to indicate a Vista style command link glyph.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_VistaShield</td>
<td style="text-align:right">57</td>
<td style="text-align:center">Icon used to indicate UAC prompts on Windows Vista. This will return a null pixmap or icon on all other platforms.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_BrowserReload</td>
<td style="text-align:right">58</td>
<td style="text-align:center">Icon indicating that the current page should be reloaded.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_BrowserStop</td>
<td style="text-align:right">59</td>
<td style="text-align:center">Icon indicating that the page loading should stop.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaPlay</td>
<td style="text-align:right">60</td>
<td style="text-align:center">Icon indicating that media should begin playback.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaStop</td>
<td style="text-align:right">61</td>
<td style="text-align:center">Icon indicating that media should stop playback.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaPause</td>
<td style="text-align:right">62</td>
<td style="text-align:center">Icon indicating that media should pause playback.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaSkipForward</td>
<td style="text-align:right">63</td>
<td style="text-align:center">Icon indicating that media should skip forward.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaSkipBackward</td>
<td style="text-align:right">64</td>
<td style="text-align:center">Icon indicating that media should skip backward.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaSeekForward</td>
<td style="text-align:right">65</td>
<td style="text-align:center">Icon indicating that media should seek forward.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaSeekBackward</td>
<td style="text-align:right">66</td>
<td style="text-align:center">Icon indicating that media should seek backward.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaVolume</td>
<td style="text-align:right">67</td>
<td style="text-align:center">Icon indicating a volume control.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_MediaVolumeMuted</td>
<td style="text-align:right">68</td>
<td style="text-align:center">Icon indicating a muted volume control.</td>
</tr>
<tr>
<td style="text-align:left">QStyle::SP_CustomBase</td>
<td style="text-align:right">0xf0000000</td>
<td style="text-align:center">Base value for custom standard pixmaps; custom values must be greater than this value.</td>
</tr>
</tbody>
</table>
<p>实例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">labelIcon = QtGui.QLabel(self)</div><div class="line">labelIcon.setGeometry(<span class="number">0</span>, <span class="number">0</span>, <span class="number">16</span>, <span class="number">16</span>)</div><div class="line">labelIcon.setPixmap(QtGui.QApplication.style().standardPixmap(</div><div class="line">    QtGui.QStyle.StandardPixmap(QtGui.QStyle.SP_MessageBoxInformation)).scaled(labelIcon.size(),</div><div class="line">    QtCore.Qt.KeepAspectRatio, QtCore.Qt.SmoothTransformation))</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/fjb2080/article/details/7225692" titl]]>
    </summary>
    
      <category term="内置ICON" scheme="http://moky.cc/tags/%E5%86%85%E7%BD%AEICON/"/>
    
      <category term="Qt" scheme="http://moky.cc/categories/Qt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[py2exe使用方法]]></title>
    <link href="http://moky.cc/2015/05/06/py2exe%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>http://moky.cc/2015/05/06/py2exe使用方法/</id>
    <published>2015-05-06T09:12:49.000Z</published>
    <updated>2015-05-11T01:14:08.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://www.cnblogs.com/jans2002/archive/2006/09/30/519393.html" title="http://www.cnblogs.com/jans2002/archive/2006/09/30/519393.html" target="_blank" rel="external">http://www.cnblogs.com/jans2002/archive/2006/09/30/519393.html</a></p>
</blockquote>
<h2 id="简介">简介</h2>
<p>py2exe是一个将python脚本转换成windows上的可独立执行的可执行程序(*.exe)的工具，这样，你就可以不用装python而在windows系统上运行这个可执行程序。</p>
<p>py2exe已经被用于创建wxPython,Tkinter,Pmw,PyGTK,pygame,win32com client和server,和其它的独立程序。py2exe是发布在开源许可证下的。</p>
<p><br></p>
<h2 id="安装py2exe">安装py2exe</h2>
<p>从<a href="http://prdownloads.sourceforge.net/py2exe" title="http://prdownloads.sourceforge.net/py2exe" target="_blank" rel="external">http://prdownloads.sourceforge.net/py2exe</a>下载并运行与你所安装的Python对应的py2exe版本的installer，这将安装py2exe和相应的例子；这些例子被安装在lib\site-packages\py2exe\samples目录下。</p>
<p><br></p>
<h2 id="py2exe的用法">py2exe的用法</h2>
<p>如果你有一个名为helloworld.py的python脚本，你想把它转换为运行在windows上的可执行程序，并运行在没有安装python的windows系统上，那么首先你应写一个用于发布程序的设置脚本例如mysetup.py，在其中的setup函数前插入语句import py2exe 。<br>mysetup.py示例如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysetup.py</span></div><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line"></div><div class="line">setup(console=[<span class="string">"helloworld.py"</span>])</div></pre></td></tr></table></figure>

<p>然后按下面的方法运行mysetup.py:<br><code>python mysetup.py py2exe</code><br>上面的命令执行后将产生一个名为dist的子目录，其中包含了helloworld.exe,python24.dll,library.zip这些文件。<br>如果你的helloworld.py脚本中用了已编译的C扩展模块，那么这些模块也会被拷贝在个子目录中，同样，所有的dll文件在运行时都是需要的，除了系统的dll文件。<br>dist子目录中的文件包含了你的程序所必须的东西，你应将这个子目录中的所有内容一起发布。</p>
<p>默认情况下，py2exe在目录dist下创建以下这些必须的文件：</p>
<ol>
<li>一个或多个exe文件。</li>
<li>python##.dll。 </li>
<li>几个.pyd文件，它们是已编译的扩展名，它们是exe文件所需要的；加上其它的.dll文件，这些.dll是.pyd所需要的。</li>
<li>一个library.zip文件，它包含了已编译的纯的python模块如.pyc或.pyo<br>上面的mysetup.py创建了一个控制台的helloword.exe程序，如果你要创建一个图形用户界的程序，那么你只需要将mysetup.py中的console=[“helloworld.py”]替换为windows=[“myscript.py”]既可。</li>
</ol>
<p>py2exe一次能够创建多个exe文件，你需要将这些脚本文件的列表传递给console或windows的关键字参数。如果你有几个相关联的脚本，那么这是很有用的。<br>运行下面个命令，将显示py2exe命令的所有命令行标记。<br><code>python mysetup.py py2exe --help</code></p>
<p><br></p>
<h2 id="指定额外的文件">指定额外的文件</h2>
<p>一些应用程序在运行时需要额外的文件，诸如配置文件、字体、位图。<br>如果在安装脚本中用data_files可选项指定了那些额外的文件，那么py2exe能将这些文件拷贝到dist子目录中。data_files应包含一个元组(target-dir, files)列表，其中的files是这些额外的文件的列表。<br>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysetup.py</span></div><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> glob</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line"></div><div class="line">setup(console=[<span class="string">"helloworld.py"</span>],</div><div class="line">      data_files=[(<span class="string">"bitmaps"</span>,</div><div class="line">                   [<span class="string">"bm/large.gif"</span>, <span class="string">"bm/small.gif"</span>]),</div><div class="line">                  (<span class="string">"fonts"</span>,</div><div class="line">                   glob.glob(<span class="string">"fonts\\*.fnt"</span>))],</div><div class="line">)</div></pre></td></tr></table></figure>

<p>说明：data_files选项将创建一个子目录dist\bitmaps，其中包含两个.gif文件；一个子目录dist\fonts，其中包含了所有的.fnt文件。</p>
<p><br></p>
<h2 id="Windows_NT_services">Windows NT services</h2>
<p>你可以通过传递一个service关键字参数给setup函数来建造Windows NT services<br>,这个service参数的值必须是一个Python模块名(包含一service类)的列表。<br>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysetup.py</span></div><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line"></div><div class="line">setup(service=[<span class="string">"MyService"</span>])</div></pre></td></tr></table></figure>

<p>所建造的可执行的service是可以通过在其后跟一定的命令行参数标记来自行安装和卸载的。你可以通过在这个可执行的service(exe)后跟一-help参数来得到更多的帮助。</p>
<p><br></p>
<h2 id="COM_servers">COM servers</h2>
<p>你可以通过传递一个com_server 关键字参数给setup函数来建造Windows NT services<br>,这个service参数的值必须是一个Python模块名(包含一个或多个COM server 类)的列表。<br>示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># mysetup.py</span></div><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line"></div><div class="line">setup(com_server=[<span class="string">"win32com.server.interp"</span>])</div></pre></td></tr></table></figure>

<p>默认情况下，DLL和EXE servers被建造，你不需要它们的话你可以简单的删除它们。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://www.cnblogs.com/jans2002/archive/2006/09/30/519393.]]>
    </summary>
    
      <category term="py2exe" scheme="http://moky.cc/tags/py2exe/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[py2exe error: MSVCP90.dll: No such file or directory]]></title>
    <link href="http://moky.cc/2015/05/05/py2exe-error-MSVCP90-dll-No-such-file-or-directory/"/>
    <id>http://moky.cc/2015/05/05/py2exe-error-MSVCP90-dll-No-such-file-or-directory/</id>
    <published>2015-05-05T09:22:08.000Z</published>
    <updated>2015-05-11T01:14:08.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/sunny5211/article/details/6431864" title="http://blog.csdn.net/sunny5211/article/details/6431864" target="_blank" rel="external">http://blog.csdn.net/sunny5211/article/details/6431864</a></p>
</blockquote>
<p>当用py2exe 2.6编译python程序时出现这样的错误，从google上搜到了解决方法，英文网站就不翻译了，直接贴出解决方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#setup.py</span></div><div class="line"><span class="keyword">from</span> distutils.core <span class="keyword">import</span> setup</div><div class="line"><span class="keyword">import</span> py2exe</div><div class="line">setup(windows=[<span class="string">"frame.py"</span>],options = { <span class="string">"py2exe"</span>:{<span class="string">"dll_excludes"</span>:[<span class="string">"MSVCP90.dll"</span>]}})</div></pre></td></tr></table></figure>

<p>保存为setup.py</p>
<p>然后运行：<code>python setup.py py2exe</code> 就可以编译成功了</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>【转】原创作品，允许转载。转载时请务必以超链接形式标明文章原始出处、作者信息和本声明，否则将追究法律责任。<br><a href="http://blog.csdn.net/sunny5211/article/details/6431864" ti]]>
    </summary>
    
      <category term="py2exe" scheme="http://moky.cc/tags/py2exe/"/>
    
      <category term="Python" scheme="http://moky.cc/categories/Python/"/>
    
  </entry>
  
</feed>
